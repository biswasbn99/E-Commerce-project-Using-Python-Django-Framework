{% extends "homepage/base.html" %}
{% block title %}Sales Analytics Dashboard{% endblock %}

{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');
  
  * {
    font-family: 'Inter', sans-serif;
    box-sizing: border-box;
  }
  
  body {
    margin: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    overflow-x: hidden;
  }
  
  .dashboard-container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 40px 20px;
    position: relative;
    z-index: 2;
  }
  
  /* Animated Background */
  .dashboard-container::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
    animation: float 20s ease-in-out infinite;
    z-index: -1;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    33% { transform: translateY(-30px) rotate(0.5deg); }
    66% { transform: translateY(30px) rotate(-0.5deg); }
  }
  
  /* Header Section */
  .dashboard-header {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 24px;
    padding: 30px 40px;
    margin-bottom: 40px;
    box-shadow: 
      0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 10px 10px -5px rgba(0, 0, 0, 0.04);
    position: relative;
    overflow: hidden;
  }
  
  .dashboard-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
    background-size: 300% 100%;
    animation: gradientShift 3s ease infinite;
  }
  
  @keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .dashboard-title {
    color: #1a202c;
    font-size: 32px;
    font-weight: 800;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 15px;
  }
  
  .dashboard-title i {
    color: #667eea;
    font-size: 36px;
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  
  .dashboard-subtitle {
    color: #718096;
    font-size: 16px;
    margin: 8px 0 0 0;
    font-weight: 500;
  }
  
  /* Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
  }
  
  .stat-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 30px;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }
  
  .stat-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 
      0 25px 50px -12px rgba(0, 0, 0, 0.25),
      0 0 0 1px rgba(255, 255, 255, 0.3);
  }
  
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--card-gradient);
    transition: height 0.3s ease;
  }
  
  .stat-card:hover::before {
    height: 8px;
  }
  
  .revenue-daily { --card-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
  .revenue-weekly { --card-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
  .revenue-monthly { --card-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
  .orders-daily { --card-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
  .orders-weekly { --card-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
  .orders-monthly { --card-gradient: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
  
  .stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }
  
  .stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
    background: var(--card-gradient);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .stat-value {
    font-size: 36px;
    font-weight: 800;
    color: #1a202c;
    margin: 10px 0;
    background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .stat-label {
    color: #718096;
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .stat-change {
    font-size: 12px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 8px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }
  
  .stat-change.positive {
    color: #38a169;
    background: rgba(56, 161, 105, 0.1);
  }
  
  .stat-change.negative {
    color: #e53e3e;
    background: rgba(229, 62, 62, 0.1);
  }
  
  /* Charts Grid */
  .charts-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    margin-bottom: 40px;
  }
  
  .chart-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 
      0 10px 25px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }
  
  .chart-card:hover {
    transform: translateY(-4px);
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.15),
      0 0 0 1px rgba(255, 255, 255, 0.2);
  }
  
  .chart-title {
    color: #1a202c;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .chart-title i {
    color: #667eea;
  }
  
  .chart-container {
    position: relative;
    height: 350px;
    width: 100%;
  }
  
  /* Products Section */
  .products-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 40px;
  }
  
  .products-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 
      0 10px 25px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(255, 255, 255, 0.1);
  }
  
  .products-title {
    color: #1a202c;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 25px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .product-item {
    display: flex;
    align-items: center;
    padding: 15px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
  }
  
  .product-item:hover {
    background: rgba(102, 126, 234, 0.05);
    border-radius: 12px;
    padding-left: 15px;
    padding-right: 15px;
    margin: 0 -15px;
  }
  
  .product-item:last-child {
    border-bottom: none;
  }
  
  .product-rank {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 14px;
    margin-right: 15px;
  }
  
  .product-info {
    flex: 1;
  }
  
  .product-name {
    color: #1a202c;
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 4px;
  }
  
  .product-stats {
    display: flex;
    gap: 15px;
    align-items: center;
  }
  
  .product-sold {
    color: #667eea;
    font-weight: 600;
    font-size: 14px;
  }
  
  .product-revenue {
    color: #38a169;
    font-weight: 600;
    font-size: 14px;
  }
  
  /* Status Distribution */
  .status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  
  .status-item {
    background: rgba(255, 255, 255, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s ease;
  }
  
  .status-item:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.8);
  }
  
  .status-count {
    font-size: 24px;
    font-weight: 800;
    color: #1a202c;
    margin-bottom: 5px;
  }
  
  .status-label {
    color: #718096;
    font-size: 14px;
    font-weight: 600;
    text-transform: capitalize;
  }
  
  /* Responsive Design */
  @media (max-width: 1200px) {
    .charts-grid {
      grid-template-columns: 1fr;
    }
    
    .products-section {
      grid-template-columns: 1fr;
    }
  }
  
  @media (max-width: 768px) {
    .dashboard-container {
      padding: 20px 15px;
    }
    
    .stats-grid {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .dashboard-header {
      padding: 20px;
    }
    
    .dashboard-title {
      font-size: 24px;
    }
    
    .stat-card {
      padding: 20px;
    }
    
    .chart-card, .products-card {
      padding: 20px;
    }
  }
  
  /* Loading Animation */
  .loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(102, 126, 234, 0.3);
    border-radius: 50%;
    border-top-color: #667eea;
    animation: spin 1s ease-in-out infinite;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  
  /* Smooth Transitions */
  * {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>

<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="d-flex justify-content-between align-items-start">
      <div>
        <h1 class="dashboard-title">
          <i class="fas fa-chart-line"></i>
          Sales Analytics Dashboard
        </h1>
        <p class="dashboard-subtitle">Real-time insights and performance metrics</p>
      </div>
      <div class="d-flex gap-3">
        <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary d-flex align-items-center gap-2" style="
          background: rgba(108, 117, 125, 0.9);
          border: 1px solid rgba(255, 255, 255, 0.2);
          color: white;
          padding: 12px 20px;
          border-radius: 12px;
          text-decoration: none;
          font-weight: 600;
          transition: all 0.3s ease;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0, 0, 0, 0.2)';" 
           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0, 0, 0, 0.15)';">
          <i class="fas fa-arrow-left"></i>
          Back to Dashboard
        </a>
      </div>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <!-- Daily Revenue -->
    <div class="stat-card revenue-daily">
      <div class="stat-header">
        <div class="stat-icon">
          <i class="fas fa-money-bill-wave"></i>
        </div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          +12%
        </div>
      </div>
      <div class="stat-value">৳{{ daily_revenue|floatformat:0 }}</div>
      <div class="stat-label">Today's Revenue</div>
    </div>

    <!-- Weekly Revenue -->
    <div class="stat-card revenue-weekly">
      <div class="stat-header">
        <div class="stat-icon">
          <i class="fas fa-calendar-week"></i>
        </div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          +8%
        </div>
      </div>
      <div class="stat-value">৳{{ weekly_revenue|floatformat:0 }}</div>
      <div class="stat-label">Weekly Revenue</div>
    </div>

    <!-- Monthly Revenue -->
    <div class="stat-card revenue-monthly">
      <div class="stat-header">
        <div class="stat-icon">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          +15%
        </div>
      </div>
      <div class="stat-value">৳{{ monthly_revenue|floatformat:0 }}</div>
      <div class="stat-label">Monthly Revenue</div>
    </div>

    <!-- Daily Orders -->
    <div class="stat-card orders-daily">
      <div class="stat-header">
        <div class="stat-icon">
          <i class="fas fa-shopping-cart"></i>
        </div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          +5%
        </div>
      </div>
      <div class="stat-value">{{ daily_orders }}</div>
      <div class="stat-label">Today's Orders</div>
    </div>

    <!-- Weekly Orders -->
    <div class="stat-card orders-weekly">
      <div class="stat-header">
        <div class="stat-icon">
          <i class="fas fa-boxes"></i>
        </div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          +3%
        </div>
      </div>
      <div class="stat-value">{{ weekly_orders }}</div>
      <div class="stat-label">Weekly Orders</div>
    </div>

    <!-- Monthly Orders -->
    <div class="stat-card orders-monthly">
      <div class="stat-header">
        <div class="stat-icon">
          <i class="fas fa-chart-bar"></i>
        </div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          +18%
        </div>
      </div>
      <div class="stat-value">{{ monthly_orders }}</div>
      <div class="stat-label">Monthly Orders</div>
    </div>
  </div>

  <!-- Charts Grid -->
  <div class="charts-grid">
    <!-- Revenue Trend Chart -->
    <div class="chart-card">
      <h3 class="chart-title">
        <i class="fas fa-line-chart"></i>
        Revenue Trend (Last 7 Days)
      </h3>
      <div class="chart-container">
        <canvas id="revenueChart"></canvas>
      </div>
    </div>

    <!-- Order Status Distribution -->
    <div class="chart-card">
      <h3 class="chart-title">
        <i class="fas fa-pie-chart"></i>
        Order Status Distribution
      </h3>
      <div class="chart-container">
        <canvas id="statusChart"></canvas>
      </div>
    </div>
  </div>

  <!-- Monthly Overview Chart -->
  <div class="chart-card" style="margin-bottom: 40px;">
    <h3 class="chart-title">
      <i class="fas fa-chart-area"></i>
      Monthly Overview (Last 12 Months)
    </h3>
    <div class="chart-container">
      <canvas id="monthlyChart"></canvas>
    </div>
  </div>

  <!-- Products Section -->
  <div class="products-section">
    <!-- Top Products -->
    <div class="products-card">
      <h3 class="products-title">
        <i class="fas fa-trophy"></i>
        Top Selling Products
      </h3>
      {% for product in top_products %}
      <div class="product-item">
        <div class="product-rank">{{ forloop.counter }}</div>
        <div class="product-info">
          <div class="product-name">{{ product.product__name|default:"Unknown Product" }}</div>
          <div class="product-stats">
            <span class="product-sold">{{ product.total_sold }} sold</span>
            <span class="product-revenue">৳{{ product.total_revenue|floatformat:0 }}</span>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="product-item">
        <div class="product-info">
          <div class="product-name">No products found</div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Key Metrics -->
    <div class="products-card">
      <h3 class="products-title">
        <i class="fas fa-calculator"></i>
        Key Performance Metrics
      </h3>
      <div class="product-item">
        <div class="product-info">
          <div class="product-name">Average Daily Revenue</div>
          <div class="product-stats">
            <span class="product-sold">৳{{ avg_daily_revenue|floatformat:0 }}</span>
          </div>
        </div>
      </div>
      <div class="product-item">
        <div class="product-info">
          <div class="product-name">Average Order Value</div>
          <div class="product-stats">
            <span class="product-sold">৳{{ avg_order_value|floatformat:0 }}</span>
          </div>
        </div>
      </div>
      <div class="product-item">
        <div class="product-info">
          <div class="product-name">Conversion Rate</div>
          <div class="product-stats">
            <span class="product-sold">3.2%</span>
          </div>
        </div>
      </div>
      <div class="product-item">
        <div class="product-info">
          <div class="product-name">Customer Satisfaction</div>
          <div class="product-stats">
            <span class="product-sold">4.8/5.0</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Order Status Overview -->
  <div class="chart-card">
    <h3 class="chart-title">
      <i class="fas fa-list-alt"></i>
      Order Status Overview
    </h3>
    <div class="status-grid">
      {% for status in status_data %}
      <div class="status-item">
        <div class="status-count">{{ status.count }}</div>
        <div class="status-label">{{ status.status }}</div>
      </div>
      {% empty %}
      <div class="status-item">
        <div class="status-count">0</div>
        <div class="status-label">No Data</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="chart-card" style="text-align: center; margin-top: 40px;">
    <div class="d-flex justify-content-center gap-3">
      <a href="{% url 'admin_dashboard' %}" class="btn btn-primary" style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        color: white;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        display: flex;
        align-items: center;
        gap: 8px;
      " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(102, 126, 234, 0.4)';" 
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.3)';">
        <i class="fas fa-home"></i>
        Dashboard
      </a>
      <a href="{% url 'manage_orders' %}" class="btn btn-outline-primary" style="
        border: 2px solid #667eea;
        color: #667eea;
        padding: 12px 24px;
        border-radius: 12px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      " onmouseover="this.style.backgroundColor='#667eea'; this.style.color='white'; this.style.transform='translateY(-2px)';" 
         onmouseout="this.style.backgroundColor='transparent'; this.style.color='#667eea'; this.style.transform='translateY(0)';">
        <i class="fas fa-shopping-cart"></i>
        Orders
      </a>
      <a href="{% url 'manage_products' %}" class="btn btn-outline-primary" style="
        border: 2px solid #667eea;
        color: #667eea;
        padding: 12px 24px;
        border-radius: 12px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      " onmouseover="this.style.backgroundColor='#667eea'; this.style.color='white'; this.style.transform='translateY(-2px)';" 
         onmouseout="this.style.backgroundColor='transparent'; this.style.color='#667eea'; this.style.transform='translateY(0)';">
        <i class="fas fa-box"></i>
        Products
      </a>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Chart.js Global Configuration
Chart.defaults.font.family = 'Inter';
Chart.defaults.font.size = 12;
Chart.defaults.color = '#4a5568';

// Revenue Trend Chart
const revenueCtx = document.getElementById('revenueChart').getContext('2d');
const revenueChart = new Chart(revenueCtx, {
    type: 'line',
    data: {
        labels: {{ last_7_days_labels|safe }},
        datasets: [{
            label: 'Daily Revenue (৳)',
            data: {{ last_7_days_revenue|safe }},
            borderColor: '#667eea',
            backgroundColor: 'rgba(102, 126, 234, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: '#667eea',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 6,
            pointHoverRadius: 8,
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                display: false
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                grid: {
                    color: 'rgba(0,0,0,0.05)',
                },
                ticks: {
                    callback: function(value) {
                        return '৳' + value.toLocaleString();
                    }
                }
            },
            x: {
                grid: {
                    display: false
                }
            }
        },
        elements: {
            line: {
                tension: 0.4
            }
        }
    }
});

// Order Status Pie Chart
const statusCtx = document.getElementById('statusChart').getContext('2d');
const statusLabels = [{% for status in status_data %}'{{ status.status|title }}'{% if not forloop.last %},{% endif %}{% endfor %}];
const statusCounts = [{% for status in status_data %}{{ status.count }}{% if not forloop.last %},{% endif %}{% endfor %}];

const statusChart = new Chart(statusCtx, {
    type: 'doughnut',
    data: {
        labels: statusLabels,
        datasets: [{
            data: statusCounts,
            backgroundColor: [
                '#667eea',
                '#f093fb',
                '#4facfe',
                '#43e97b',
                '#fa709a',
                '#a8edea'
            ],
            borderWidth: 0,
            hoverOffset: 10
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom',
                labels: {
                    padding: 20,
                    usePointStyle: true,
                    pointStyle: 'circle'
                }
            }
        },
        cutout: '60%'
    }
});

// Monthly Overview Chart
const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
const monthlyChart = new Chart(monthlyCtx, {
    type: 'bar',
    data: {
        labels: {{ monthly_labels|safe }},
        datasets: [{
            label: 'Revenue (৳)',
            data: {{ monthly_revenue_data|safe }},
            backgroundColor: 'rgba(102, 126, 234, 0.8)',
            borderColor: '#667eea',
            borderWidth: 1,
            borderRadius: 8,
            borderSkipped: false,
        }, {
            label: 'Orders',
            data: {{ monthly_order_data|safe }},
            backgroundColor: 'rgba(240, 147, 251, 0.8)',
            borderColor: '#f093fb',
            borderWidth: 1,
            borderRadius: 8,
            borderSkipped: false,
            yAxisID: 'y1'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: {
            mode: 'index',
            intersect: false,
        },
        plugins: {
            legend: {
                labels: {
                    usePointStyle: true,
                    pointStyle: 'circle'
                }
            }
        },
        scales: {
            y: {
                type: 'linear',
                display: true,
                position: 'left',
                grid: {
                    color: 'rgba(0,0,0,0.05)',
                },
                ticks: {
                    callback: function(value) {
                        return '৳' + value.toLocaleString();
                    }
                }
            },
            y1: {
                type: 'linear',
                display: true,
                position: 'right',
                grid: {
                    drawOnChartArea: false,
                },
                ticks: {
                    callback: function(value) {
                        return value + ' orders';
                    }
                }
            },
            x: {
                grid: {
                    display: false
                }
            }
        }
    }
});

// Add smooth animations and interactions
document.addEventListener('DOMContentLoaded', function() {
    // Animate stat cards on load
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
            card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });

    // Animate chart cards
    const chartCards = document.querySelectorAll('.chart-card, .products-card');
    chartCards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        setTimeout(() => {
            card.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, (index + statCards.length) * 150);
    });
});
</script>

{% endblock %}